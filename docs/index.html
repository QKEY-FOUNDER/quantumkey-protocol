<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QuantumKey — Documentation Hub</title>
  <meta name="description" content="QuantumKey — the key between consciousness and intelligence. Documentation hub: whitepaper, tokenomics, DAO, identity, protocol, specs." />
  <meta name="theme-color" content="#07121a">

  <!-- Fonts & styles -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">

  <!-- Small protective CSS overrides to prevent canvas or layering from blocking UI
       and to ensure offcanvas has predictable pointer behavior.
       These are safe, minimal, and can be moved into styles.css later.
  -->
  <style>
    /* Ensure the particles canvas never intercepts pointer events */
    #particles {
      pointer-events: none !important;
      position: fixed;
      inset: 0;
      z-index: 0;
    }

    /* Header should be above canvas */
    .site-header {
      position: relative;
      z-index: 10;
    }

    /* Offcanvas: hidden state should not intercept clicks */
    .offcanvas {
      pointer-events: none;
      opacity: 0;
      transform: translateX(-12px);
      transition: opacity 180ms ease, transform 180ms ease;
      z-index: 20;
    }
    .offcanvas.open {
      pointer-events: auto;
      opacity: 1;
      transform: translateX(0);
      z-index: 1000;
    }

    /* Ensure header-actions (menu area) is focusable and above default content */
    .header-actions {
      z-index: 11;
    }

    /* Make overlay/backdrop optional visual; if you add an overlay element later, ensure high z-index */
    .offcanvas-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.36);
      z-index: 900;
      pointer-events: auto;
    }

    /* Defensive: ensure menu button visible and clickable */
    .menu-btn { cursor: pointer; }
  </style>
</head>

<body class="dark">
  <canvas id="particles" aria-hidden="true"></canvas>

  <header class="site-header">
    <div class="container header-row">
      <div class="brand">
        <a class="brand-link" href="./" aria-label="QuantumKey home">
          <div class="brand-logo-wrapper" aria-hidden="false">
            <img src="./assets/quantumkey-logo.svg" alt="QuantumKey badge" class="brand-img" />
          </div>
          <span class="brand-name">QUANTUMKEY</span>
        </a>
      </div>

      <!-- keep header-actions interactive (removed aria-hidden) -->
      <nav class="header-actions">
        <!-- top links intentionally removed -->
        <button id="menu-btn" class="menu-btn" type="button" aria-expanded="false" aria-controls="offcanvas-menu" aria-label="Abrir menu">
          <span class="burger" aria-hidden="true"></span>
        </button>
      </nav>
    </div>
  </header>

  <!-- Off-canvas menu (initially hidden via aria-hidden="true") -->
  <nav id="offcanvas-menu" class="offcanvas" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Menu principal">
    <div class="offcanvas-inner container">
      <button id="menu-close" class="menu-close" type="button" aria-label="Fechar menu">×</button>
      <ul class="nav-list">
        <li><a href="#hero">Home</a></li>
        <li><a href="#docs">Documentation</a></li>
        <li><a href="./assets/whitepaper/QuantumKey_Whitepaper.pdf" target="_blank" rel="noopener">Whitepaper</a></li>
        <li><a href="./assets/whitepaper/QuantumKey_Tokenomics.pdf" target="_blank" rel="noopener">Tokenomics</a></li>
      </ul>
    </div>
  </nav>

  <main class="site-main">
    <section id="hero" class="hero container" aria-labelledby="hero-heading">
      <div class="hero-visual">
        <div class="hero-poster" aria-hidden="true">
          <!-- Poster / large central image -->
          <img src="./assets/quantumkey-logo.svg" alt="QuantumKey poster" class="poster-thumb" />
        </div>
      </div>

      <div class="hero-content">
        <h1 id="hero-heading" class="site-title">QuantumKey</h1>
        <p class="site-subtitle">
          A subtle architecture of meaning — the key that harmonizes conscious intent with machine intelligence.
        </p>

        <div class="hero-cta">
          <a class="btn btn-primary" href="./assets/whitepaper/QuantumKey_Whitepaper.pdf" target="_blank" rel="noopener">Read Whitepaper</a>
          <a class="btn btn-primary" href="./assets/whitepaper/QuantumKey_Tokenomics.pdf" target="_blank" rel="noopener">Tokenomics</a>
        </div>
      </div>
    </section>

    <section id="docs" class="docs container">
      <h2>Documentation Library</h2>
      <p class="lead">All core documents for QuantumKey are available for download and review. Click any item to open the PDF in a new tab.</p>

      <div class="docs-grid">
        <article class="doc-card">
          <h3>Whitepaper</h3>
          <p>Vision, architecture and philosophical foundations.</p>
          <a class="doc-link" href="./assets/whitepaper/QuantumKey_Whitepaper.pdf" target="_blank" rel="noopener">Open PDF</a>
        </article>

        <article class="doc-card">
          <h3>Tokenomics</h3>
          <p>The energetic architecture of the $QKEY economy.</p>
          <a class="doc-link" href="./assets/whitepaper/QuantumKey_Tokenomics.pdf" target="_blank" rel="noopener">Open PDF</a>
        </article>

        <article class="doc-card">
          <h3>DAO</h3>
          <p>Governance model and alignment primitives.</p>
          <a class="doc-link" href="./assets/whitepaper/QuantumKey_DAO.pdf" target="_blank" rel="noopener">Open PDF</a>
        </article>

        <article class="doc-card">
          <h3>Identity</h3>
          <p>Identity as a field of presence and continuity.</p>
          <a class="doc-link" href="./assets/whitepaper/QuantumKey_Identity.pdf" target="_blank" rel="noopener">Open PDF</a>
        </article>

        <article class="doc-card">
          <h3>Protocol</h3>
          <p>Operational mechanics of the harmonic engine.</p>
          <a class="doc-link" href="./assets/whitepaper/QuantumKey_Protocol.pdf" target="_blank" rel="noopener">Open PDF</a>
        </article>

        <article class="doc-card">
          <h3>Specs</h3>
          <p>Technical spine and message propagation rules.</p>
          <a class="doc-link" href="./assets/whitepaper/QuantumKey_Specs.pdf" target="_blank" rel="noopener">Open PDF</a>
        </article>
      </div>
    </section>

    <footer class="site-footer">
      <div class="container">
        <p>© QuantumKey — The union of Consciousness and Intelligence.</p>
        <p>Repository: <a href="https://github.com/QKEY-FOUNDER/quantumkey" target="_blank" rel="noopener">qkey-founder/quantumkey</a></p>
      </div>
    </footer>
  </main>

  <!-- Inline fallback JS: minimal menu handling, defensive (won't conflict with your script.js) -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      try {
        const menuBtn = document.getElementById('menu-btn');
        const offcanvas = document.getElementById('offcanvas-menu');
        const menuClose = document.getElementById('menu-close');

        if (!menuBtn || !offcanvas) return;

        // Defensive: ensure button types
        menuBtn.type = 'button';
        if (menuClose) menuClose.type = 'button';

        function openMenu() {
          offcanvas.classList.add('open');
          offcanvas.setAttribute('aria-hidden', 'false');
          menuBtn.setAttribute('aria-expanded', 'true');
          // optional: add backdrop if desired
        }
        function closeMenu() {
          offcanvas.classList.remove('open');
          offcanvas.setAttribute('aria-hidden', 'true');
          menuBtn.setAttribute('aria-expanded', 'false');
        }

        menuBtn.addEventListener('click', function (e) {
          e.stopPropagation();
          const hidden = offcanvas.getAttribute('aria-hidden') === 'true';
          hidden ? openMenu() : closeMenu();
        });

        if (menuClose) {
          menuClose.addEventListener('click', function (e) {
            e.stopPropagation();
            closeMenu();
          });
        }

        // click outside closes menu
        document.addEventListener('click', function (e) {
          if (!offcanvas.classList.contains('open')) return;
          if (!offcanvas.contains(e.target) && !menuBtn.contains(e.target)) {
            closeMenu();
          }
        });

        // ESC closes menu
        document.addEventListener('keydown', function (e) {
          if (e.key === 'Escape' && offcanvas.classList.contains('open')) {
            closeMenu();
          }
        });

        // Ensure canvas cannot intercept clicks (extra safety)
        const canvas = document.getElementById('particles');
        if (canvas) canvas.style.pointerEvents = 'none';
      } catch (err) {
        console.warn('menu fallback error', err);
      }
    });
  </script>

  <!-- External script (deferred). Kept last so DOM is ready; will enhance UI further if present -->
  <script src="./script.js" defer></script>
  <script>
/* FIX TEMP: attach simple offcanvas toggle so menu buttons work even if script.js não carregou */
(function () {
  // Espera pelo DOM
  function ready(fn) {
    if (document.readyState !== 'loading') fn();
    else document.addEventListener('DOMContentLoaded', fn);
  }

  ready(function () {
    var menuBtn = document.getElementById('menu-btn');
    var menuClose = document.getElementById('menu-close');
    var offcanvas = document.getElementById('offcanvas-menu');

    if (!menuBtn || !offcanvas) return;

    function openMenu() {
      offcanvas.classList.add('open');
      offcanvas.setAttribute('aria-hidden', 'false');
      menuBtn.setAttribute('aria-expanded', 'true');
    }
    function closeMenu() {
      offcanvas.classList.remove('open');
      offcanvas.setAttribute('aria-hidden', 'true');
      menuBtn.setAttribute('aria-expanded', 'false');
    }

    menuBtn.addEventListener('click', function (e) {
      e.preventDefault();
      if (offcanvas.classList.contains('open')) closeMenu();
      else openMenu();
    });

    if (menuClose) menuClose.addEventListener('click', function (e) { e.preventDefault(); closeMenu(); });

    // fecha quando clica fora do painel (opcional)
    offcanvas.addEventListener('click', function (e) {
      if (e.target === offcanvas) closeMenu();
    });
  });
})();
  </script>
</body>
</html>
